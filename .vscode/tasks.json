{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "seed db",
            "type": "shell",
            "command": "wp db import ./db/seed.sql && rm -rf ./wp-content/fonts",
            "hide": true,
            "problemMatcher": []
        },
        {
            "label": "search replace db",
            "type": "shell",
            "command": "wp search-replace dev.local.municipio.tech ${input:DOMAIN_TO} --all-tables --skip-columns=guid --skip-plugins && wp search-replace https://${input:DOMAIN_TO} http://${input:DOMAIN_TO} --all-tables --skip-columns=guid --skip-plugins",
            "hide": true,
            "problemMatcher": [],
        },
        {
            "label": "deactivate incompatible plugins",
            "type": "shell",
            "command": "wp plugin deactivate active-directory-api-wp-integration force-ssl --network --skip-plugins",
            "hide": true,
            "problemMatcher": []
        },
        {
            "label": "install acf pro plugin",
            "type": "shell",
            "command": "./.vscode/bin/download-plugin-acf-pro.sh ${input:ACF_PRO_KEY} && ./.vscode/bin/install-plugin-acf-pro.sh",
            "hide": true,
            "problemMatcher": []
        },
        {
            "label": "add .htaccess",
            "type": "shell",
            "command": "cp ./.devcontainer/config/.htaccess ./.htaccess",
            "hide": true,
            "problemMatcher": []
        },
        {
            "label": "add required config files",
            "type": "shell",
            "command": "mkdir -p ./config && cp ./config-example/* ./config && cp ./.devcontainer/config/wp-config/* ./config",
            "hide": true,
            "problemMatcher": []
        },
        {
            "label": "setup:local site",
            "dependsOn": [
                "add required config files",
                "install acf pro plugin",
                "seed db",
                "search replace db",
                "deactivate incompatible plugins",
                "add .htaccess"
            ],
            "dependsOrder": "sequence",
            "type": "shell",
            "command": "echo \"ðŸ’ª Done setting up local site\"",
            "problemMatcher": []
        },
    ],
    "inputs": [
        {
            "id": "ACF_PRO_KEY",
            "type": "promptString",
            "description": "Enter your ACF Pro license key",
            "default": ""
        },
        {
            "id": "DOMAIN_TO",
            "type": "promptString",
            "description": "Enter the domain,including port number you want to replace with. E.g. \"localhost:8123\".",
            "default": ""
        }
    ]
}